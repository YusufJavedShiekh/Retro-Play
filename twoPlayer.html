<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tic Tac Toe</title>
  <style>
/* RESET */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Poppins', sans-serif;
}

/* BACKGROUND (Retro Ripple) */
body {
  background: radial-gradient(circle at top, #0d0d0d, #000);
  color: white;
  text-align: center;
  overflow-x: hidden;
  position: relative;
}

/* Ripple animation */
body::before {
  content: "";
  position: fixed;
  width: 480px;
  height: 480px;
  border-radius: 50%;
  background: rgba(255, 0, 85, 0.15);
  top: 55%;
  left: 50%;
  transform: translate(-50%, -50%);
  filter: blur(6px);
  animation: rippleGlow 7s infinite ease-in-out;
  z-index: -1;
}
@keyframes rippleGlow {
  0% { transform: translate(-50%, -50%) scale(0.6); }
  50% { transform: translate(-50%, -50%) scale(1.4); }
  100% { transform: translate(-50%, -50%) scale(0.6); }
}

/* TITLE */
h1 {
  font-size: 60px;
  color: #ff0055;
  text-shadow: 0 0 15px #ff0055, 0 0 25px #ff4d99;
  font-weight: 800;
  margin-top: 20px;
  animation: glowPulse 3s infinite alternate;
}
@keyframes glowPulse {
  from { text-shadow: 0 0 10px #ff1a66; }
  to   { text-shadow: 0 0 30px #ff66aa; }
}

/* TURN INDICATOR */
#turn {
  font-size: 26px;
  color: #ff66aa;
  text-shadow: 0 0 10px #ff1a75;
}

/* MAIN CONTAINER */
.container {
  margin-top: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* GLOWING ANIMATED BORDER AROUND BOARD */
.game-wrapper {
  padding: 18px;
  border-radius: 25px;
  background: #111;
  position: relative;
  box-shadow: 0 0 18px #ff0055;
  animation: borderPulse 2.8s infinite alternate;
}
@keyframes borderPulse {
  from { box-shadow: 0 0 18px #ff0055; }
  to   { box-shadow: 0 0 35px #ff3399; }
}

/* GAME BOARD */
.game {
  height: 58vmin;
  width: 58vmin;
  display: flex;
  flex-wrap: wrap;
  gap: 2vmin;
}

/* GRID CELLS */
.box {
  height: 16vmin;
  width: 16vmin;
  background: #1c1c1c;
  border-radius: 12px;
  font-size: 8vmin;
  color: #ff0055;
  border: none;
  box-shadow: 0 0 15px #ff005544;
  transition: transform 0.2s, background 0.2s;
  cursor: pointer;
}

.box:hover {
  transform: scale(1.08);
  background: #2b2b2b;
  box-shadow: 0 0 20px #ff3399;
}

/* WINNING CELLS ANIMATION */
.win {
  background: #ff0055 !important;
  color: white !important;
  box-shadow: 0 0 25px #ff66aa !important;
  animation: winFlash 0.4s alternate infinite;
}
@keyframes winFlash {
  from { box-shadow: 0 0 25px #ff66aa; }
  to   { box-shadow: 0 0 50px #ff1a75; }
}

/* RETRO WINNER MESSAGE */
#msg {
  font-size: 55px;
  color: #ff66aa;
  text-shadow: 0 0 15px #ff4d99;
  animation: winnerPulse 1.3s infinite alternate;
}
@keyframes winnerPulse {
  from { transform: scale(1); opacity: 0.7; }
  to   { transform: scale(1.15); opacity: 1; }
}

/* MESSAGE OVERLAY */
.msg-container {
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  gap: 3rem;
}

/* BUTTONS */
#reset,
#new-btn {
  padding: 1rem 2rem;
  font-size: 1.3rem;
  border-radius: 1rem;
  border: none;
  cursor: pointer;
  color: white;
  box-shadow: 0 0 15px #ff005544;
  transition: 0.3s;
}

#reset {
  background: #ff0055;
}
#new-btn {
  background: #0078ff;
}

#reset:hover,
#new-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 0 25px #ff66aa;
}

/* CONFETTI PARTICLES ON WIN */
.confetti {
  position: fixed;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #ff0055;
  box-shadow: 0 0 10px #ff66aa;
  animation: fall 1.6s linear forwards;
}
@keyframes fall {
  to {
    transform: translateY(95vh) translateX(20px) rotate(360deg);
    opacity: 0;
  }
}

/* HIDING */
.hide {
  display: none;
}

/********* MOBILE **********/
@media (max-width: 600px) {
  h1 { font-size: 44px; }
  #turn { font-size: 18px; }

  .game {
    width: 78vmin;
    height: 78vmin;
    gap: 3vmin;
  }

  .box {
    width: 23vmin;
    height: 23vmin;
    font-size: 11vmin;
  }

  #msg { font-size: 40px; }
}

/* FULL SCREEN INTRO */
#startScreen {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at center, #15000d, #000);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 999;
  animation: fadeIn 0.6s ease-out forwards;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* LET'S PLAY TEXT */
.start-text {
  font-size: 60px;
  font-weight: 800;
  margin-bottom: 20px;
  color: #ff0055;
  text-shadow: 0 0 15px #ff0055, 0 0 30px #ff3380;
  animation: pulseGlow 2s infinite alternate;
}

/* TAP TO START */
.tap-text {
  font-size: 26px;
  margin-bottom: 40px;
  opacity: 0.85;
  color: #ff66aa;
  animation: blink 1.4s infinite;
}

/* Countdown number */
.count {
  font-size: 100px;
  font-weight: 900;
  color: #ff0055;
  text-shadow: 0 0 30px #ff1a75, 0 0 50px #ff66aa;
  animation: countPop 0.5s ease;
}

.hide { display: none; }

/* Animations */
@keyframes blink {
  0%,100% { opacity: 0.3; }
  50%     { opacity: 1; }
}

@keyframes pulseGlow {
  from { text-shadow: 0 0 15px #ff0055; }
  to   { text-shadow: 0 0 40px #ff66aa; }
}

@keyframes countPop {
  0%   { transform: scale(0.5); opacity: 0; }
  80%  { transform: scale(1.15); opacity: 1; }
  100% { transform: scale(1); }
}

/* RESPONSIVE */
@media (max-width: 600px) {
  .start-text { font-size: 40px; }
  .tap-text { font-size: 18px; }
  .count { font-size: 70px; }
}

@media (max-width: 350px) {
  .start-text { font-size: 32px; }
  .tap-text { font-size: 16px; }
  .count { font-size: 55px; }
}

/* MUSIC BUTTON */
.music-btn {
  position: fixed;
  top: 20px;
  right: 20px;
  background: #ff0055;
  padding: 10px 20px;
  border-radius: 35px;
  cursor: pointer;
  font-size: 18px;
  color: #fff;
  z-index: 999;
  box-shadow: 0 0 12px #ff3380;
  transition: 0.3s;
}

.music-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 0 25px #ff66aa;
}

/* Glow text effect (same as homepage) */
.glow {
  text-shadow: 
    0 0 10px #ff0055,
    0 0 20px #ff3380,
    0 0 35px #ff66aa;
}
@keyframes firework {
  0% {transform: scale(0); opacity: 1;}
  100% {transform: scale(1.5); opacity: 0;}
}

.firework {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 30px;
  height: 20px;
  background: radial-gradient(circle, #ff0000, transparent);
  border-radius: 50%;
  animation: firework 1s ease-out forwards;
  pointer-events: none;
}



  </style>
</head>
<body>
  <!-- FULL SCREEN START SCREEN -->
<div id="startScreen">
  <h1 class="start-text glow">LET'S PLAY!</h1>
  <p class="tap-text glow">Tap to Start</p>

  <!-- Countdown (hidden initially) -->
  <div id="countdown" class="count hide">3</div>
</div>

<!-- SOUND EFFECTS -->
<audio id="beep" src="beep.mp3"></audio>
<audio id="goSound" src="go.mp3"></audio>

  <h1>Tic Tac Toe </h1>
   <div class="msg-container hide">
    <p id="msg">Winner</p>
    <button id="new-btn">New Game </button>
  </div>
  <div class="container">
    <div class="game">
      <button class="box"></button>
      <button class="box"></button>
      <button class="box"></button>
      <button class="box"></button>
      <button class="box"></button>
      <button class="box"></button>
      <button class="box"></button>
      <button class="box"></button>
      <button class="box"></button>
    </div>
  </div>  

  <h3 id="turn"> First Player Chance</h3>
  <button id="reset">Reset</button>  
  <audio  id="clickSound" src="click.mp3"></audio>
  <audio  id="fireSound" src="fire.mp3"></audio>
  <audio  id="winSound" src="win.mp3"></audio>
  <audio  id="loseSound" src="lose.mp3"></audio>
  <audio  id="restartSound" src="restart.mp3"></audio>
   <audio  id="drawSound" src="draw.mp3"></audio>

  <script>
 

  const startScreen = document.getElementById("startScreen");
  const countBox = document.getElementById("countdown");

  const beep = document.getElementById("beep");
  const goSound = document.getElementById("goSound");

  /* ---------------------------------------
      ASYNC FUNCTION: Wait for start + countdown
  ---------------------------------------- */
  function waitForStart() {
    return new Promise(resolve => {

      const tapToStart = document.querySelector(".tap-text");
      const startText = document.querySelector(".start-text");

      // User taps screen to begin
      startScreen.addEventListener("click", () => {
        // Hide texts
        tapToStart.style.display = "none";
        startText.style.display = "none";

        // Start countdown
        let count = 3;
        countBox.innerText = count;
        countBox.classList.remove("hide");

        const interval = setInterval(() => {
          beep.play();
          count--;

          if (count > 0) {
            countBox.innerText = count;
          } else {
            clearInterval(interval);

            // GO!
            countBox.innerText = "GO!";
            goSound.play();

            // Fade out screen
            setTimeout(() => {
              startScreen.style.opacity = "0";
              startScreen.style.transition = "0.6s ease";

              setTimeout(() => {
                startScreen.style.display = "none";

                // FINALLY RESOLVE ‚Üí GAME CAN START
                resolve();
              }, 600);

            }, 500);
          }

        }, 1000);
      }, { once: true });

    });
  }

  /* ---------------------------------------
      MAIN GAME START (async)
  ---------------------------------------- */
  async function initGame() {
    console.log("Waiting for intro...");
    
    // ‚è≥ Wait here until countdown completes
    await waitForStart();

    console.log("Countdown finished. Game starting now!");

    // ‚≠ê ALL your game code goes here
    // Example:
    // enable clicking boxes
    // reset board
    // set turn
    startActualGame();  
  }
function startActualGame() {
  // DOM references
  const boxes = document.querySelectorAll(".box");
  const resetBtn = document.querySelector("#reset");
  const newBtn = document.querySelector("#new-btn");
  const msgContainer = document.querySelector(".msg-container");
  const msg = document.querySelector("#msg");
  const chance = document.querySelector("#turn");

  const clickSound = document.querySelector('#clickSound');
  const fireSound = document.querySelector('#fireSound');
  const winSound = document.querySelector('#winSound');
  const loseSound = document.querySelector('#loseSound');
  const restartSound = document.querySelector('#restartSound');
  const drawSound = document.querySelector('#drawSound');

  const startScreen = document.getElementById("startScreen");
  const countBox = document.getElementById("countdown");
  const beep = document.getElementById("beep");
  const goSound = document.getElementById("goSound");

  // Game state
  let gameStarted = false;
  let gameOver = false;
  let turnO = true; // true => First player uses 'O', false => Second player uses 'X'
  let clickCount = 0;

  const winPattern = [
    [0,1,2],
    [0,3,6],
    [0,4,8],
    [1,4,7],
    [2,5,8],
    [3,4,5],
    [6,7,8],
    [2,4,6]
  ];

  // ---------- Start Screen (Countdown) ----------
  startScreen.addEventListener("click", () => {
    if (gameStarted) return;
    gameStarted = true;

    // Hide initial texts (if exist)
    const tapText = document.querySelector(".tap-text");
    const startText = document.querySelector(".start-text");
    if (tapText) tapText.style.display = "none";
    if (startText) startText.style.display = "none";

    // Countdown 3..2..1..GO
    let count = 3;
    if (countBox) {
      countBox.innerText = count;
      countBox.classList.remove("hide");
    }

    const interval = setInterval(() => {
      if (beep) beep.play().catch(()=>{});
      count--;
      if (countBox) {
        if (count > 0) countBox.innerText = count;
        else {
          clearInterval(interval);
          countBox.innerText = "GO!";
          if (goSound) goSound.play().catch(()=>{});
          // hide the start screen with fade
          setTimeout(() => {
            startScreen.style.transition = "opacity 0.6s";
            startScreen.style.opacity = "0";
            setTimeout(() => {
              startScreen.style.display = "none";
              if (countBox) countBox.classList.add("hide");
            }, 600);
          }, 500);
        }
      }
    }, 1000);
  });

  // ---------- Utilities ----------
  const disableBoxs = () => {
    boxes.forEach(b => b.disabled = true);
  };

  const enableBoxs = () => {
    boxes.forEach(b => {
      b.disabled = false;
      b.innerText = "";
    });
  };

  const spawnConfetti = () => {
    for (let i = 0; i < 20; i++) {
      let c = document.createElement("div");
      c.classList.add("confetti");
      c.style.left = Math.random() * window.innerWidth + "px";
      c.style.top = "-10px";
      document.body.appendChild(c);
      // remove when animation ends (safer)
      c.addEventListener('animationend', () => c.remove());
      // fallback removal
      setTimeout(() => c.remove(), 2000);
    }
  };

  function showFireworks() {
    for (let i = 0; i < 20; i++) {
      let fw = document.createElement("div");
      fw.classList.add("firework");
      fw.style.top = Math.random() * 100 + "vh";
      fw.style.left = Math.random() * 100 + "vw";
      fw.style.background = `radial-gradient(circle, hsl(${Math.random()*360},100%,60%), transparent)`;
      document.body.appendChild(fw);
      fw.addEventListener('animationend', () => fw.remove());
      setTimeout(() => fw.remove(), 1200); // fallback
    }
  }

  // ---------- showWinner (now properly defined) ----------
  function showWinner(winnerText) {
    gameOver = true;                  // stop further moves
    msg.style.color = "#00ff88";      // valid hex color
    msg.innerText = `üèÜüéâ Congratulations ‚Äî ${winnerText} üëëüî•`;
    msgContainer.classList.remove("hide");

    // celebration
    showFireworks();
    spawnConfetti();

    // sounds (safely)
    if (winSound) winSound.play().catch(()=>{});
    if (fireSound) fireSound.play().catch(()=>{});

    disableBoxs();
  }

  // ---------- checkWinner ----------
  const checkWinner = () => {
    for (let pattern of winPattern) {
      const pos1Val = boxes[pattern[0]].innerText.trim();
      const pos2Val = boxes[pattern[1]].innerText.trim();
      const pos3Val = boxes[pattern[2]].innerText.trim();

      if (pos1Val !== "" && pos1Val === pos2Val && pos2Val === pos3Val) {
        // Found a winner ‚Äî which player?
        if (pos1Val === "O") showWinner("First Player");
        else showWinner("Second Player");

        return; // stop checking further
      }
    }
  };

  // ---------- checkDraw ----------
  const checkDraw = () => {
    if (!gameOver && clickCount >= 9) {
      gameOver = true;
      msg.innerText = `ü§ù Match Draw`;
      msgContainer.classList.remove("hide");
      if (drawSound) {
        // play draw for exactly 1s (optional)
        drawSound.currentTime = 0;
        drawSound.play().catch(()=>{});
        setTimeout(() => { drawSound.pause(); drawSound.currentTime = 0; }, 1000);
      }
      disableBoxs();
    }
  };

  // ---------- resetGame ----------
  const resetGame = () => {
    gameOver = false;
    turnO = true;          // First player starts with 'O'
    clickCount = 0;
    msgContainer.classList.add("hide");
    enableBoxs();
    chance.innerText = `üßç‚Äç‚ôÇÔ∏è First Player Chance`;
    if (restartSound) restartSound.play().catch(()=>{});
  };

  // ---------- box click handling ----------
  boxes.forEach((box) => {
    box.addEventListener("click", () => {
      if (gameOver) return;               // no clicks after game ends
      if (box.innerText.trim() !== "") return; // already filled

      // Play click sound (safe)
      if (clickSound) clickSound.play().catch(()=>{});

      // Place symbol for the current player
      if (turnO) {
        box.innerText = "O";
      } else {
        box.innerText = "X";
      }
      box.disabled = true;
      clickCount++;

      // Check win immediately
      checkWinner();
      if (gameOver) return; // if win detected, stop here

      // Check draw (if board full)
      checkDraw();
      if (gameOver) return;

      // Switch turn and update UI
      turnO = !turnO;
      chance.innerText = turnO ? `üßç‚Äç‚ôÇÔ∏è First Player Chance` : `üßç‚Äç‚ôÇÔ∏è Second Player Chance`;
    });
  });

  // ---------- Event listeners for reset/new ----------
  if (newBtn) newBtn.addEventListener("click", resetGame);
  if (resetBtn) resetBtn.addEventListener("click", resetGame);

  // Initialize UI
  resetGame();
}


  
  initGame();
</script>




  
</body>
</html>